{% extends 'base.html' %}
{% load static %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<link href="{% static 'realize.css' %}" rel="stylesheet">
<div class="block_container">
    <div class="minor_nav">
        <button class="select_nav" onclick="change_display(['貼文意境 Style','container','貼文人格分析 Personality','container_1'])"><h5>分析總覽</h5></button>
        <button class="select_nav" onclick="change_display(['問卷結果','container_2'])"><h5 >問卷結果</h5></button>
        <button class="select_nav"><h5 >群體分析</h5></button>
    </div>
    <div style="display: flex; margin-top: 20px">
        <img class="profile_pic" src="static/asset/test_profile.JPG">
        <div style="width: 80%;">
            <h1 class="name">{{request.user}}</h1>
            <div style="display: flex;">
                <div style="width: 30%;">
                    <h1 class="name" style="font-size: 15px;">貼文數量</h1>
                    <h1 class="name" style="font-size: 15px;">100</h1>
                </div>
                <div>
                    <h1 class="name" style="font-size: 15px;">總共被按讚次數</h1>
                    <h1 class="name" style="font-size: 15px;">300</h1>
                </div>
            </div>
        </div>
    </div>
    <div id="panel_container" style="align-items: center;">
        <div style="margin-top: 50px;">
            <div class="sub_title">
                <h5>貼文意境 Style</h5>
            </div>
            <div class="display_container">
                <div id="container"></div>
            </div>
        </div>
        <div style="margin: 15px;">
            <div class="sub_title">
                <h5>貼文人格分析 Personality</h5>
            </div>
            <div class="display_container">
                <div id="container_1"></div>
            </div>
        </div>
    </div>
</div>
<script>
$( window ).load(create_chart());
function change_display(contain_list){
  var e = $("#panel_container").empty();
  for(var l = 0; l < contain_list.length; l++){
    var title = contain_list[l];
    l = l + 1
    var container_name = contain_list[l];
    e.append("<div style='margin-top: 50px;'><div class='sub_title'><h5>" + title + "</h5></div></div><div class='display_container'><div id='" + container_name + "'></div></div>")
  }
  create_chart()
};
function create_chart(){
  Highcharts.chart('container', {
  chart: {
      polar: true,
      type: 'line'
  },

  title: {
      text: 'Instagram 五大人格傾向分析'
  },

  pane: {
      size: '80%'
  },

  xAxis: {
      categories: ['Openness', 'Conscientiousness','Extraversion','Agreeableness','Neuroticism'],
      tickmarkPlacement: 'on',
      lineWidth: 0
  },

  yAxis: {
      gridLineInterpolation: 'polygon',
      lineWidth: 0,
      min: 0
  },

  tooltip: {
      shared: true,
      pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y}</b><br/>'
  },

  legend: {
      align: 'right',
      verticalAlign: 'middle'
  },

  series: [{
      name: 'big 5 prdiction',
      data: [ parseFloat("{{uid.big5_openness}}"), parseFloat("{{uid.big5_conscientiousness}}"), parseFloat("{{uid.big5_extraversion}}"), parseFloat("{{uid.big5_agreeableness}}"), parseFloat("{{uid.big5_neuroticism}}")],
      pointPlacement: 'on'
  }],

  responsive: {
      rules: [{
          condition: {
              maxWidth: 1
          },
          chartOptions: {
              legend: {
                  align: 'center',
                  verticalAlign: 'bottom'
              },
              pane: {
                  size: '70%'
              }
          }
      }]
  }
});
    // Create the chart
Highcharts.chart('container_1', {
  chart: {
    type: 'pie'
  },
  title: {
    text: 'Instagram 圖片風格分析',
  },
  subtitle: {
    text:'',
  },
  plotOptions: {
    series: {
      dataLabels: {
        enabled: true,
        format: '{point.name}: {point.y:.1f}%'
      }
    }
  },

  tooltip: {
    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
  },

  series: [
    {
      name: "Browsers",
      colorByPoint: true,
      data: [
        {
          name: "hiking",
          y: Number("{{uid.style_hiking}}"),
          drilldown: "hiking"
        },
        {
          name: "infant",
          y: Number("{{uid.style_infant}}"),
          drilldown: "infant"
        },
        {
          name: "studying",
          y: Number("{{uid.style_studying}}"),
          drilldown: "studying"
        },
        {
          name: "celebrate",
          y: Number("{{uid.style_celebrate}}"),
          drilldown: "celebrate"
        },
        {
          name: "firework",
          y: Number("{{uid.style_firework}}"),
          drilldown: "firework"
        },
        {
          name: "nightclub",
          y: Number("{{uid.style_nightclub}}"),
          drilldown: "nightclub"
        },
        {
          name: "sports",
          y: Number("{{uid.style_sports}}"),
          drilldown: "sports"
        },
        {
          name: "depressed",
          y: Number("{{uid.style_depressed}}"),
          drilldown: "depressed"
        },
        {
          name: "lonely",
          y: Number("{{uid.style_lonely}}"),
          drilldown: "lonely"
        },
        {
          name: "selfie",
          y: Number("{{uid.style_selfie}}"),
          drilldown: "selfie"
        },
        {
          name: "building",
          y: Number("{{uid.style_building}}"),
          drilldown: "building"
        },
        {
          name: "delicious",
          y: Number("{{uid.style_delicious}}"),
          drilldown: "delicious"
        },
        {
          name: "books",
          y: Number("{{uid.style_books}}"),
          drilldown: "books"
        },
      ]
    }
  ],
  drilldown: {
    series: [
      {
        name: "Chrome",
        id: "Chrome",
        data: [
          [
            "v65.0",
            0.1
          ],
          [
            "v64.0",
            1.3
          ],
          [
            "v63.0",
            53.02
          ],
          [
            "v62.0",
            1.4
          ],
          [
            "v61.0",
            0.88
          ],
          [
            "v60.0",
            0.56
          ],
          [
            "v59.0",
            0.45
          ],
          [
            "v58.0",
            0.49
          ],
          [
            "v57.0",
            0.32
          ],
          [
            "v56.0",
            0.29
          ],
          [
            "v55.0",
            0.79
          ],
          [
            "v54.0",
            0.18
          ],
          [
            "v51.0",
            0.13
          ],
          [
            "v49.0",
            2.16
          ],
          [
            "v48.0",
            0.13
          ],
          [
            "v47.0",
            0.11
          ],
          [
            "v43.0",
            0.17
          ],
          [
            "v29.0",
            0.26
          ]
        ]
      },
    ]
  }
});

}
</script>
{% endblock %}
